# HF 미디어 모니터링 대시보드 — 완전 활용 매뉴얼

> **한국주택금융공사 온라인 여론 모니터링 시스템**  
> 뉴스·YouTube·DC인사이드·네이버 블로그·티스토리·블라인드·인스타그램 **7개 채널**에서  
> 키워드 언급량 수집 → **감성 분석** → **트렌드 탐지** → **AI 대응문 자동 생성**까지 수행합니다.

---

## 목차

1. [시스템 전체 구조](#1-시스템-전체-구조)
2. [화면 구성 한눈에 보기](#2-화면-구성-한눈에-보기)
3. [STEP 1 — 조건 설정 (좌측 사이드바)](#3-step-1--조건-설정-좌측-사이드바)
4. [STEP 2 — 데이터 수집 실행](#4-step-2--데이터-수집-실행)
5. [STEP 3 — KPI 카드 해석](#5-step-3--kpi-카드-해석)
6. [STEP 4 — 📊 개요 탭 (언급량·감성·채널 분석)](#6-step-4--개요-탭)
7. [STEP 5 — 🔥 트렌드 탭 (키워드 급등 탐지)](#7-step-5--트렌드-탭)
8. [STEP 6 — 📄 문서 탭 (수집 원문 검색)](#8-step-6--문서-탭)
9. [STEP 7 — 🤖 AI 대응 탭 (자동 대응문 생성)](#9-step-7--ai-대응-탭)
10. [분석 엔진 동작 원리](#10-분석-엔진-동작-원리)
11. [API 키별 기능 차이](#11-api-키별-기능-차이)
12. [실무 활용 시나리오](#12-실무-활용-시나리오)
13. [자주 묻는 질문 (FAQ)](#13-자주-묻는-질문-faq)

---

## 1. 시스템 전체 구조

이 대시보드는 단순한 **게시물 수집기가 아닙니다**. 수집 후 다음 5단계 분석이 자동으로 이루어집니다.

```
┌─────────────────────────────────────────────────────────────────┐
│                    데이터 수집 (7개 채널)                          │
│  뉴스RSS → YouTube API → DC크롤러 → 네이버블로그 → 티스토리        │
│                  → 블라인드 → 인스타그램                           │
└──────────────────────────┬──────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────────────┐
│                  ① 감성 분석 (자동 실행)                           │
│  문서별 감성 점수 계산 (-1.0 ~ +1.0)                               │
│  긍정 단어(65개) / 부정 단어(68개) 사전 매칭                        │
│  부정 표현(않/못/불/비/무) 처리                                     │
│  → 긍정 / 중립 / 부정 분류                                         │
└──────────────────────────┬──────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────────────┐
│               ② 시계열 집계 (시간 버킷별)                          │
│  일별/주별/월별/분기별/연별 집계 구간 생성                           │
│  구간별: 총 언급량 / 채널별 언급량 / 키워드별 언급량                  │
│  구간별: 긍정/중립/부정 비율 → 감성 추이 계산                        │
└──────────────────────────┬──────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────────────┐
│              ③ 부정 스파이크 탐지 (Z-Score)                        │
│  시계열 부정 건수에 Z-Score 알고리즘 적용                            │
│  Z ≥ 2.0 구간 → 스파이크로 판정, 차트에 빨간선 표시                  │
└──────────────────────────┬──────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────────────┐
│              ④ 트렌드 키워드 탐지 (Z-Score)                        │
│  문서 전체 텍스트에서 한국어 단어 추출 (2글자 이상 명사)               │
│  불용어 제거 → 구간별 빈도 계산 → Z-Score 산출                       │
│  Z ≥ 2.0 → 🔥 트렌딩 / Z ≥ 1.0 → ↑ 상승 중                      │
└──────────────────────────┬──────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────────────┐
│          ⑤ AI 자동 대응문 생성 (버튼 클릭 시)                       │
│  OpenAI GPT-4o-mini: 실제 수집 문서 기반으로 정교한 분석             │
│  API 키 없을 때: 룰 기반 자동 생성 (즉시 사용 가능)                  │
│  → 전체 요약 / 핵심 이슈 / FAQ / 공지문 / 에스컬레이션 기준           │
└─────────────────────────────────────────────────────────────────┘
```

> **핵심 포인트**: "수집/갱신" 버튼 1번으로 수집 + 5단계 분석이 모두 자동 실행됩니다.  
> 탭 4개는 이 분석 결과를 **다양한 시각으로 보여주는 뷰어**입니다.

---

## 2. 화면 구성 한눈에 보기

```
┌──────────────────┬────────────────────────────────────────────────────┐
│                  │  [수집 현황 바] — 채널별 수집 성공/실패 상태          │
│  좌측 사이드바    │  ─────────────────────────────────────────────────  │
│                  │  [KPI 카드 4개] — 항상 표시                         │
│  ① 분석 기간     │  ┌──────────┬──────────┬──────────┬──────────┐     │
│  ② 집계 주기     │  │ 총 언급량 │ 부정 비율 │ 전기 대비 │스파이크여부│    │
│  ③ 키워드 선택   │  └──────────┴──────────┴──────────┴──────────┘     │
│  ④ 채널 선택     │  ─────────────────────────────────────────────────  │
│  ⑤ DC갤러리 선택 │  [탭 메뉴] 📊 개요 | 🔥 트렌드 | 📄 문서 | 🤖 AI대응 │
│  ⑥ 액션 버튼     │  ─────────────────────────────────────────────────  │
│                  │  [선택된 탭의 분석 화면]                              │
└──────────────────┴────────────────────────────────────────────────────┘
```

---

## 3. STEP 1 — 조건 설정 (좌측 사이드바)

### ① 분석 기간 설정

- **시작일 / 종료일** 달력 선택
- 기간 변경 후 자동 적용됨 (별도 "적용" 불필요)
- 권장 기간:

| 집계 주기 | 권장 기간 | 비고 |
|----------|---------|------|
| 일별 | 7일 ~ 30일 | 이슈 발생 직후 세부 추이 |
| 주별 | 1개월 ~ 3개월 | 주간 보고서 |
| 월별 | 3개월 ~ 1년 | 월간 리포트 |
| 분기별 | 1년 ~ 2년 | 분기 보고, 중기 트렌드 |
| 연별 | 2년 이상 | 연간 정책 효과 측정 |

### ② 집계 주기 선택

언급량 차트의 X축 단위를 결정합니다.
- **일별**: 날짜별 막대 (이슈 발생 날짜 특정에 최적)
- **주별**: 주 단위 집계 (주간 보고용)
- **월별**: 월 단위 집계 (월간 리포트용)
- **분기별**: 3개월 단위
- **연별**: 연간 단위

### ③ 키워드 선택 (11개 기본 제공)

```
[브랜드]   한국주택금융공사 / HF / 주금공
[상품]     보금자리론 / 주택연금 / 전세자금보증 / MBS
[기타상품]  커버드본드 / 커버드본드 지급보증 / 건설자금보증 / 전세지킴보증
```

> **활용 팁**:
> - 특정 상품 이슈만 분석 → 해당 키워드만 선택
> - 브랜드 전체 여론 파악 → 한국주택금융공사 + HF + 주금공 선택
> - 신상품 반응 측정 → 해당 상품 키워드 단독 선택

### ④ 채널 선택 (7개)

| 채널 | 수집 방식 | 특성 및 활용 |
|------|----------|-------------|
| 📰 뉴스 | Google News RSS | 언론사 보도, 가장 신뢰도 높음 |
| ▶ YouTube | YouTube Data API v3 | 영상 제목+설명 분석, 조회수 포함 |
| 💬 DC인사이드 | 웹 크롤러 | 부동산/금융/대출/정책 갤러리, 커뮤니티 반응 |
| 📝 네이버 블로그 | Naver API + 크롤러 | 개인 경험담, 이용 후기, 생활 밀착형 |
| 🍊 티스토리 | Kakao API + 크롤러 | 전문 블로그, 금융 분석·재테크 글 |
| 🙈 블라인드 | 웹 크롤러 | 직장인 내부 의견, 업계 분위기, 익명성 |
| 📸 인스타그램 | RSS + 크롤러 | SNS 여론, MZ세대 반응, 해시태그 |

> **목적별 채널 선택 가이드**:
> - 🔴 **위기 모니터링**: DC인사이드 + 블라인드 (부정 여론 조기 탐지)
> - 📣 **홍보 효과 측정**: YouTube + 인스타그램 + 네이버 블로그
> - 📰 **언론 동향 파악**: 뉴스 (단독)
> - 📊 **종합 여론 분석**: 전체 7개 채널

### ⑤ DC 갤러리 선택

DC인사이드 채널 선택 시 표시됩니다.
- **부동산 갤러리**: 주택 구매, 전세 관련 실거주자 의견
- **금융 갤러리**: 금융상품 전반, 투자 관련
- **대출 갤러리**: 대출 경험, 조건 비교
- **정책 갤러리**: 정부 정책, 규제 관련 여론

### ⑥ 액션 버튼

| 버튼 | 동작 | 사용 시점 |
|------|------|---------|
| 🔄 **수집/갱신** | 설정 조건으로 수집 + 분석 실행 | 최초 분석 또는 조건 변경 후 |
| ↻ **강제 새로고침** | 캐시 무시, 실시간 재수집 | 최신 데이터가 반드시 필요할 때 |
| 🎭 **데모 데이터로 보기** | API 없이 샘플 데이터로 전체 기능 확인 | 테스트, 데모, UI 확인 시 |

---

## 4. STEP 2 — 데이터 수집 실행

### 수집 → 분석 자동 흐름

```
[수집/갱신 클릭]
      ↓
각 채널에서 키워드 검색·수집
  뉴스: Google News RSS → 제목, 링크, 날짜, 출처, 요약
  YouTube: YouTube API → 영상 제목, 설명, 채널명, 조회수
  DC인사이드: 갤러리 크롤링 → 게시물 제목, 본문, 날짜
  네이버 블로그: Naver API → 제목, 본문, 작성일
  티스토리: Kakao API → 포스트 제목, 내용, 날짜
  블라인드: 크롤러 → 게시물 제목, 내용, 날짜
  인스타그램: RSS → 게시물 텍스트, 날짜
      ↓
문서 정규화 (통합 스키마 적용)
  id / channel / keyword / title / text / url / published_at / source_meta
      ↓
data/raw/{channel}/{date}.json 에 캐시 저장
      ↓
★ 분석 엔진 자동 실행 ★
  ① 문서별 감성 점수 계산
  ② 시간 버킷별 집계
  ③ 부정 스파이크 탐지 (Z-Score)
  ④ 트렌드 키워드 추출 및 Z-Score 계산
      ↓
data/analytics/{start}-{end}-{granularity}.json 에 결과 캐시
      ↓
대시보드 화면 업데이트 (4개 탭 모두 동시에)
```

### 수집 현황 바 (화면 상단)

수집 직후 채널별 결과가 표시됩니다:

| 상태 | 의미 | 대응 방법 |
|------|------|---------|
| ✓ **성공** | 정상 수집 완료 | — |
| △ **부분** | 일부만 수집 (기간 내 게시물 부족 등) | 기간 확대 또는 다른 키워드 추가 |
| ✗ **실패** | 크롤러 오류 또는 네트워크 문제 | 해당 채널 체크 해제 후 재시도 |
| — **건너뜀** | API 키 미설정으로 자동 건너뜀 | .env.local에 API 키 추가 |

### 캐시 활용

- **동일 조건 재요청 시**: 캐시에서 즉시 반환 (약 1초 이내)
- **강제 새로고침 시**: 캐시 무시하고 실시간 재수집
- 화면 우상단에 **"캐시 데이터"** 배지로 캐시 사용 여부 표시

---

## 5. STEP 3 — KPI 카드 해석

수집 및 분석 완료 후 화면 상단에 **4개의 핵심 지표**가 표시됩니다.

```
┌─────────────────┬─────────────────┬─────────────────┬─────────────────┐
│  📊 총 언급량    │  💭 부정 비율    │  📈 전기 대비    │  🚨 스파이크     │
│                 │                 │                 │                 │
│    247건        │    31%          │    +42건        │  ⚠ 감지됨       │
│  7개 채널       │  부정 76건      │  전기 205건     │  트렌딩 4개     │
└─────────────────┴─────────────────┴─────────────────┴─────────────────┘
```

### ① 총 언급량
- 선택 기간·채널·키워드 조건에서 수집된 전체 문서 수
- 기준값: 평소 대비 급등 여부 확인

### ② 부정 비율
- 전체 언급 중 부정 감성으로 자동 분류된 비율
- **경고 수준**:
  - 🟢 25% 미만: 정상
  - 🟡 25~40%: 주의 (모니터링 강화)
  - 🔴 40% 이상: 경고 (즉시 대응 검토)

### ③ 전기 대비
- **가장 최근 집계 구간** vs **직전 구간** 언급량 차이
- `+42` = 직전 구간보다 42건 더 많이 언급됨
- 마이너스(-) = 언급량 감소 (이슈 소강 중)

### ④ 부정 스파이크
- 부정 언급의 **Z-Score ≥ 2.0**인 구간 감지 여부
- **"⚠ 감지됨"** 표시 → 즉시 🤖 AI 대응 탭에서 대응문 생성 권장
- "트렌딩 N개" = 현재 Z-Score ≥ 2인 급등 키워드 수

---

## 6. STEP 4 — 📊 개요 탭

> **전체 여론 동향을 한눈에 파악하는 탭**

### 📈 언급량 추이 (채널별 라인 차트)

| 요소 | 의미 |
|------|------|
| X축 | 선택한 집계 주기의 시간 버킷 (일/주/월/분기/연) |
| Y축 | 해당 구간의 문서 수 |
| 각 선 색상 | 채널 구분 (뉴스=파랑, YouTube=빨강, DC=초록, 블로그=노랑, 티스토리=주황, 블라인드=분홍, 인스타=보라) |
| 🔴 빨간 세로 점선 | 부정 스파이크 감지 구간 (Z-Score ≥ 2.0) |

**활용법**:
1. 특정 날짜에 선이 급등 → 문서 탭에서 해당 날짜 원문 확인
2. 특정 채널만 급등 → 해당 채널 여론 집중 모니터링
3. 빨간 점선 구간 → AI 대응 탭에서 즉시 대응문 생성

### 💭 감성 분포 추이 (스택 영역 차트)

각 시간 구간의 문서를 **긍정(초록) / 중립(회색) / 부정(빨강)** 3개 영역으로 시각화

**자동 분류 기준**:

| 분류 | 판단 기준 |
|------|---------|
| 긍정 | 긍정 단어(지원확대, 금리인하, 성공, 혜택, 만족 등) 비율이 높음 |
| 부정 | 부정 단어(논란, 사기, 규제강화, 부실, 우려, 불만 등) 비율이 높음 |
| 중립 | 긍/부정 단어 없거나 균형 잡힌 경우 |

**활용법**:
- 부정(빨강) 영역이 넓어지는 구간 → 여론 악화 신호
- 긍정(초록) 영역 증가 → 캠페인·공지 효과 확인

### 📡 채널별 언급량 (가로 바 차트)

- 어느 채널에서 가장 많이 언급되는지 비교
- 채널 점유율 파악 → 마케팅/모니터링 채널 우선순위 결정

### 🔑 키워드별 언급량 (바 그래프)

- 선택한 키워드 중 어떤 상품/브랜드가 가장 많이 언급되는지 비교
- 언급량 가장 많은 키워드 = 현재 가장 뜨거운 이슈

### ⚠ 부정 스파이크 상세 패널

부정 스파이크 감지 시 자동으로 화면 하단에 표시:

| 정보 | 설명 |
|------|------|
| 발생 날짜 | 스파이크가 감지된 시간 버킷 |
| 부정 건수 | 해당 구간의 부정 문서 수 |
| 부정 비율 | 해당 구간 전체 중 부정 비율 |
| Z-Score | 급등 강도 (높을수록 심각) |

---

## 7. STEP 5 — 🔥 트렌드 탭

> **현재 온라인에서 갑자기 많이 언급되는 키워드를 탐지하는 탭**

### 🔥 트렌드 키워드 패널

수집된 모든 문서의 텍스트에서 한국어 단어를 추출하고,  
**통계적으로 급등한 키워드**를 자동으로 표시합니다.

**계산 방법**:
```
① 문서 텍스트에서 한국어 단어 추출 (2글자 이상, 불용어 제거)
② 집계 구간별 각 단어의 빈도수 계산
③ Z-Score = (현재 구간 빈도 - 전체 구간 평균) / 표준편차
④ 임계값 적용:
   Z ≥ 2.0 → 🔥 트렌딩 (통계적으로 유의미한 급등)
   Z ≥ 1.0 → ↑ 상승 중
   Z < 1.0 → 일반 (평상시 수준)
```

**배지 색상 의미**:

| 배지 색 | Z-Score | 의미 | 권장 행동 |
|---------|---------|------|---------|
| 🔴 빨강 | Z ≥ 3.0 | 매우 강한 급등 | 즉시 원인 파악 + 대응 |
| 🟠 주황 | 2.0 ≤ Z < 3.0 | 트렌딩 | 모니터링 강화 |
| 🟡 노랑 | 1.0 ≤ Z < 2.0 | 상승 중 | 관찰 필요 |
| ⬜ 회색 | Z < 1.0 | 일반 수준 | 정상 모니터링 |

**활용 팁**:
- 트렌드 키워드가 **부정 단어와 함께** 등장 → 위기 신호, AI 대응 탭으로 이동
- 트렌드 키워드를 다음 수집 시 키워드 목록에 추가 → 더 정밀한 모니터링

### 📡 채널별 감성 현황

각 채널(뉴스/YouTube/DC인사이드 등)별로 분석된 결과:

- **긍정/중립/부정 건수** 및 비율 바 표시
- 어느 채널에서 부정 여론이 집중되는지 파악 가능

| 채널별 분석 활용법 | 예시 |
|-----------------|------|
| DC인사이드 부정 높음 | 커뮤니티 FAQ 즉시 업데이트 |
| 뉴스 부정 높음 | 언론 대응 보도자료 준비 |
| 블라인드 부정 높음 | 내부 임직원 대상 안내 필요 |
| YouTube 부정 높음 | 공식 영상 댓글 관리 및 반박 영상 검토 |

---

## 8. STEP 6 — 📄 문서 탭

> **수집된 원문을 직접 확인하고 필터링하는 탭**

### 문서 필터 옵션

수집된 모든 문서를 조건에 따라 필터링:

| 필터 | 옵션 |
|------|------|
| 감성 필터 | 전체 / 긍정 / 중립 / 부정 |
| 채널 필터 | 전체 / 뉴스 / YouTube / DC인사이드 / 네이버 블로그 / 티스토리 / 블라인드 / 인스타그램 |

### 문서 목록 컬럼 설명

| 컬럼 | 설명 |
|------|------|
| 제목 | 게시물/기사 제목 (클릭 시 우측 상세 패널 열림) |
| 날짜 | 게시물 원본 작성일 |
| 채널 | 수집 출처 채널명 |
| 감성 | 🟢 긍정 / ⬜ 중립 / 🔴 부정 배지 |
| 키워드 | 매칭된 모니터링 키워드 |

### 우측 상세 패널 (문서 클릭 시 열림)

- 제목 / 날짜 / 채널 / 키워드
- 감성 점수 (숫자, -1.0 ~ +1.0)
- 내용 요약/발췌
- 추가 정보: YouTube → 조회수, DC인사이드 → 갤러리명
- **"원문 보기 →"** 버튼으로 실제 게시물 페이지 이동

### 실무 활용법

```
① 부정 필터 선택
  → 부정으로 분류된 문서만 추출

② 날짜 최신순 정렬
  → 현재 이슈가 되는 게시물 파악

③ 원문 보기 클릭
  → 실제 게시물 맥락 확인 (아이러니/비꼬기 여부 등)

④ AI 대응 탭으로 이동
  → 해당 이슈에 대한 대응문 자동 생성
```

---

## 9. STEP 7 — 🤖 AI 대응 탭

> **분석 결과를 기반으로 실무에 바로 쓸 수 있는 대응문을 자동 생성하는 탭**

### 생성 방법

1. 개요/트렌드 탭에서 분석 내용 확인 후
2. **🤖 AI 대응 탭** 클릭
3. **"📋 자동 요약 생성/갱신"** 버튼 클릭
4. 약 5~15초 후 7가지 항목 자동 생성

> ※ **OpenAI API 키 없이도** 룰 기반 자동 생성 즉시 동작  
> ※ **API 키 있으면** GPT-4o-mini가 실제 수집 내용 기반으로 더 정교하게 생성

### 생성 항목 상세

#### 1) 📋 전체 요약
```
분석 기간 전체의 핵심 내용을 3~5문장으로 자동 요약

예시:
2024-01-01 ~ 2024-01-31 기간 동안 총 247건의 문서가 수집되었습니다.
감성 분포는 긍정 89건(36%), 중립 82건(33%), 부정 76건(31%)입니다.
부정 언급 급증 구간이 감지되었습니다. 즉각적인 모니터링 강화가 필요합니다.
트렌드 키워드: 전세사기, 금리인상, 대출규제
```
→ **보고서 첫 문단에 그대로 활용 가능**

#### 2) 🔍 핵심 이슈 (3~7개)
```
현재 기간에서 가장 중요한 이슈 목록

예시:
01. 부정 언급 급증 구간 감지 - 즉각 대응 필요
02. 부정 언급 비율 31% - 대응 필요
03. 부정 이슈: 전세자금보증 부정 수급 적발 사례 증가...
04. 트렌드 키워드 급상승: 전세사기(z=2.8), 금리인상(z=2.3)
```

#### 3) ✅ 사실확인 체크리스트
대응 전 반드시 확인해야 할 항목들:
- 보도 사실 여부 확인
- 공식 발표 내용과 언론 보도 내용 대조
- 수치 오류 여부 확인 (금리, 한도, 조건 등)
- 출처 신뢰성 검토 (주요 언론사 vs 블로그/커뮤니티)
- 시간적 맥락 확인 (과거 정책과 현재 정책 혼동 여부)

#### 4) ❓ FAQ 초안 (5~7개)
```
온라인에서 자주 제기되는 질문에 대한 Q&A 초안

예시:
Q. 한국주택금융공사의 주요 역할은 무엇인가요?
A. HF는 주택담보대출 유동화, 주택연금, 전세자금보증 등을 통해
   국민 주거 안정을 지원하는 공공기관입니다.

Q. 전세자금보증 신청은 어떻게 하나요?
A. 전세 계약 후 금융기관에서 신청하며, 보증금 한도와 조건은
   지역·소득·자산 등에 따라 다릅니다.
```
→ **홈페이지 FAQ, 고객센터 대응 스크립트에 즉시 활용**

#### 5) 📢 공지문 초안
- **단문 (100자)**: SNS 공지, 배너용
- **장문 (300자)**: 홈페이지 공지, 보도자료용
- **복사 버튼**으로 즉시 클립보드 복사

#### 6) 🔎 추가 모니터링 키워드
현재 이슈와 연관하여 함께 모니터링할 키워드 추천  
→ 다음 수집 시 키워드 목록에 추가하여 사용

#### 7) 🚨 에스컬레이션 기준
```
상황 악화 시 보고·대응 레벨을 올려야 하는 임계치:

• 일별 부정 언급 30건 초과 시 긴급 대응팀 알림
• 부정 언급 비율 40% 초과 시 상위 보고
• 트렌드 키워드 Z-Score 3.0 이상 시 즉시 검토
• 주요 언론사 부정 보도 발생 시 즉각 대응
• 커뮤니티 부정 게시글 100건 초과 시 FAQ 즉시 업데이트
```

### AI 탭 내 2개 서브탭

| 서브탭 | 내용 |
|-------|------|
| **📊 분석 요약** | 전체 요약 + 핵심 이슈 + 사실확인 체크리스트 + FAQ |
| **📋 대응 가이드** | 공지문(단문/장문) + 추가 모니터링 키워드 + 에스컬레이션 기준 |

---

## 10. 분석 엔진 동작 원리

### 감성 분석 알고리즘

```
입력: 문서 제목 + 본문 텍스트

Step 1: 긍정 단어 사전 매칭 (65개 단어)
  지원, 성공, 성장, 향상, 개선, 혜택, 안전, 안정, 신뢰, 확대, 금리인하, 지원확대 등

Step 2: 부정 단어 사전 매칭 (68개 단어)
  우려, 문제, 위기, 손실, 논란, 사기, 부실, 불만, 항의, 규제강화, 부담증가 등

Step 3: 부정 표현 처리
  '않', '못', '불', '비', '무', '미' 포함 시 부정 가중치 +0.5

Step 4: 감성 점수 계산
  rawScore = (긍정매칭수 - 부정매칭수) / (긍정매칭수 + 부정매칭수)

Step 5: 분류 임계값 적용
  rawScore > +0.2  → 긍정 (positive)
  rawScore < -0.2  → 부정 (negative)
  그 사이           → 중립 (neutral)

출력: sentiment (positive/neutral/negative) + score (-1.0 ~ +1.0)
```

> **정확도 참고**: 룰 기반 한국어 분석으로 약 70~75% 수준  
> OpenAI API 키 연결 시 문맥 기반 분석으로 정확도 향상 (약 85~90%)

### Z-Score 기반 스파이크 탐지

```
입력: 시계열 부정 건수 배열 [d1, d2, d3, ... dn]

Step 1: 평균(mean) 계산
  mean = (d1 + d2 + ... + dn) / n

Step 2: 표준편차(stddev) 계산
  variance = Σ(di - mean)² / n
  stddev = √variance

Step 3: 각 구간의 Z-Score 계산
  z_i = (d_i - mean) / stddev

Step 4: 임계값 판정
  z_i ≥ 2.0 → 스파이크 (KPI 경고 + 차트 빨간선)

출력: 스파이크 구간 목록 (날짜 + 부정건수 + z-score)
```

### 트렌드 키워드 탐지

```
입력: 전체 문서 텍스트 + 시간 버킷 구조

Step 1: 한국어 토큰 추출
  - URL, 특수문자, 숫자 제거
  - 2글자 이상 한국어 단어 추출
  - 불용어(이/가/을/를/은/는 등 조사·어미) 제거
  - config/stopwords.json 커스텀 불용어 적용

Step 2: 구간별 키워드 빈도 계산
  각 시간 버킷에서 각 키워드가 몇 번 등장하는지 집계

Step 3: Z-Score 계산 (트렌드 키워드 탐지용)
  z = (현재 구간 빈도 - 전체 구간 평균) / 표준편차

Step 4: 트렌드 판정
  z ≥ 2.0 → 🔥 트렌딩
  z ≥ 1.0 → ↑ 상승 중
  z < 1.0 → 일반

출력: 키워드 목록 (keyword + count + zscore + is_trending + delta)
```

---

## 11. API 키별 기능 차이

| 기능 | API 키 없음 | API 키 있음 |
|------|------------|------------|
| **뉴스 수집** | ✅ Google RSS (정상) | ✅ 동일 |
| **YouTube 수집** | ❌ 건너뜀 (0건) | ✅ 실제 영상 수집 |
| **DC인사이드** | ✅ 크롤러 (정상) | ✅ 동일 |
| **네이버 블로그** | ✅ 크롤러 fallback | ✅ Naver API (더 많은 결과) |
| **티스토리** | ✅ 크롤러 fallback | ✅ Kakao API (더 정확) |
| **블라인드** | ✅ 크롤러 (정상) | ✅ 동일 |
| **인스타그램** | ✅ RSS+크롤러 (제한적) | ✅ Graph API (더 많은 결과) |
| **감성 분석** | ✅ 룰 기반 한국어 분석 | ✅ 동일 |
| **트렌드 Z-Score** | ✅ 통계 알고리즘 | ✅ 동일 |
| **AI 요약** | ✅ 룰 기반 자동 생성 | ✅ GPT-4o-mini (더 정교) |
| **데모 데이터** | ✅ 항상 사용 가능 | ✅ 동일 |

### API 키 설정 방법

프로젝트 루트에 `.env.local` 파일 생성:

```bash
# YouTube Data API v3 (필수 권장)
# https://console.cloud.google.com → YouTube Data API v3 활성화
YOUTUBE_API_KEY=AIza...

# OpenAI GPT-4o-mini (필수 권장)
# https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-...

# 네이버 검색 API (선택 — 더 많은 블로그 결과)
# https://developers.naver.com → 앱 생성 → 검색 API 추가
NAVER_CLIENT_ID=...
NAVER_CLIENT_SECRET=...

# 카카오 REST API (선택 — 티스토리 결과 향상)
# https://developers.kakao.com → 앱 생성
KAKAO_REST_API_KEY=...

# Instagram Graph API (선택 — Business Account 필요)
# https://developers.facebook.com
IG_ACCESS_TOKEN=...
```

설정 후 서버 재시작: `npm run dev`

---

## 12. 실무 활용 시나리오

### 시나리오 A: 일일 모니터링 루틴 (5분 완성)

```
매일 오전 9시
    ↓
① 사이드바 기간: 어제 하루, 집계주기: 일별
② 채널: 전체 선택 (또는 뉴스+DC+블라인드)
③ [수집/갱신] 클릭
    ↓
④ KPI 카드 확인
   - 총 언급량 어제보다 급등? → 개요 탭에서 채널·키워드 확인
   - 부정 비율 25% 초과?    → AI 대응 탭에서 대응문 확인
   - 부정 스파이크 감지됨?  → 즉시 원인 파악 + 대응 준비
    ↓
⑤ 개요 탭 → 언급량 급등 채널 확인
⑥ 트렌드 탭 → 새로운 급등 키워드 확인
⑦ 문서 탭 → 부정 필터 → 원문으로 원인 파악
    ↓
⑧ AI 대응 탭 → "📋 자동 요약 생성" → 보고서 초안 작성
    ↓
결과물: 일일 모니터링 보고서 (5분 내 작성 가능)
```

### 시나리오 B: 특정 이슈 심층 분석

```
예: "전세지킴보증 관련 부정 여론 급증" 이슈 발생 시
    ↓
① 키워드: '전세지킴보증' 단독 선택
② 기간: 이슈 발생 전후 2주 (비교 분석)
③ 집계주기: 일별 (이슈 발생 정확한 날짜 특정)
④ [수집/갱신]
    ↓
⑤ 개요 탭 언급량 차트 → 급등 시작 날짜 확인
⑥ 문서 탭 → 해당 날짜 + 부정 필터 → 원인 게시물 특정
⑦ 트렌드 탭 → 연관 급등 키워드 파악
⑧ AI 대응 탭 → FAQ/대응문 생성 → 수정 후 실제 사용
    ↓
결과물: 이슈 분석 보고서 + 대응 FAQ + 공지문 초안
```

### 시나리오 C: 월간 여론 리포트

```
매월 말 또는 초
    ↓
① 기간: 해당 월 전체 (2024-01-01 ~ 2024-01-31)
② 집계주기: 주별 (주간 추이 확인)
③ 키워드: 전체 선택
④ [수집/갱신]
    ↓
⑤ 개요 탭 스크린샷 → 보고서 첨부
   - 월간 언급량 추이 차트
   - 월간 감성 분포 차트
   - 채널별·키워드별 언급량 비교
    ↓
⑥ 트렌드 탭 → 이달의 트렌드 키워드 목록 기록
⑦ AI 대응 탭 → "전체 요약" + "핵심 이슈" 복사 → 보고서 본문
    ↓
결과물: 월간 온라인 여론 동향 보고서
```

### 시나리오 D: 신상품 반응 측정

```
신상품 런칭 후 효과 분석
    ↓
① 키워드: 해당 상품명 단독 (예: '전세지킴보증')
② 기간 A: 런칭 전 1개월
③ 집계주기: 주별
④ [수집/갱신] → 스크린샷 저장
    ↓
⑤ 기간 B: 런칭 후 1개월로 변경
⑥ [수집/갱신] → 비교 분석
    ↓
⑦ 비교 지표:
   - 언급량 증가폭 (런칭 전 vs 후)
   - 긍정 반응 비율 변화
   - 어느 채널에서 가장 반응 활발한지
   - 연관 트렌드 키워드 변화
    ↓
결과물: 신상품 런칭 효과 분석 보고서
```

### 시나리오 E: 위기 대응 (긴급)

```
⚠ 부정 스파이크 KPI 카드 "감지됨" 알림 시
    ↓
① 즉시 개요 탭 → 빨간 점선 구간 날짜 확인
② 문서 탭 → 해당 날짜 + 부정 필터 → 원인 게시물 파악
③ 트렌드 탭 → 연관 급등 키워드 확인
    ↓
④ AI 대응 탭 → "📋 자동 요약 생성" 클릭
   생성 항목:
   - 사실확인 체크리스트 → 보도 사실 우선 검증
   - FAQ 초안 → 고객 문의 대응 스크립트
   - 공지문 초안 → SNS/홈페이지 공지
   - 에스컬레이션 기준 → 보고 레벨 판단
    ↓
⑤ 생성된 대응문 수정·검토 후 즉시 배포
⑥ 추가 모니터링 키워드 → 다음 수집에 추가
    ↓
결과물: 위기 대응 완료 (수집~대응문 생성까지 15분 이내)
```

---

## 13. 자주 묻는 질문 (FAQ)

**Q. 데모 데이터에서도 감성 분석, 트렌드 분석이 보이나요?**  
A. 네, 데모 데이터에도 감성 분포 차트, 트렌드 키워드 패널, 부정 스파이크 표시, AI 대응 탭 등 모든 분석 기능이 작동합니다. API 키 없이도 전체 기능을 미리 확인할 수 있습니다.

**Q. 수집/갱신을 누르면 분석도 자동으로 되나요?**  
A. 네. 수집 완료 후 ① 감성 분석, ② 시계열 집계, ③ 부정 스파이크 탐지, ④ 트렌드 키워드 Z-Score 계산이 모두 자동으로 실행됩니다. AI 대응문 생성만 별도로 버튼을 눌러야 합니다.

**Q. 수집에 얼마나 걸리나요?**  
A. 선택한 채널·키워드 수에 따라 다릅니다.
- 2~3개 채널, 3~5개 키워드 → 약 20~40초
- 7개 채널 전체, 11개 키워드 전체 → 약 1~2분
- 같은 조건 재요청 시(캐시) → 즉시 반환 (약 1초)

**Q. 감성 분석이 틀린 것 같아요.**  
A. 현재 룰 기반 분석으로 약 70~75% 정확도이며, 아이러니·비꼬기 표현은 오분류될 수 있습니다. 문서 탭에서 원문을 직접 확인하는 것을 권장합니다. OpenAI API 키 연결 시 GPT-4o-mini의 문맥 기반 분석으로 정확도가 향상됩니다.

**Q. 트렌드 키워드에 의미없는 단어가 나와요.**  
A. `config/stopwords.json` 파일의 `"ko"` 배열에 불용어를 추가하면 다음 수집부터 필터링됩니다.

**Q. 키워드를 추가하고 싶어요.**  
A. `config/keywords.json` 파일의 `"all"` 배열에 키워드를 추가하면 다음 실행 시 UI에 반영됩니다.

**Q. DC인사이드/블라인드 수집이 "실패"로 나와요.**  
A. 사이트 구조 변경 또는 일시적 접근 차단으로 실패할 수 있습니다. 해당 채널 체크 해제 후 나머지 채널로 진행하거나, 잠시 후 재시도하세요.

**Q. 분석 결과를 저장하려면?**  
A. 분석 결과는 `data/analytics/` 폴더에 JSON으로 자동 저장됩니다. 화면 캡처 또는 AI 대응 탭의 **복사 버튼**을 활용해 텍스트를 내보낼 수 있습니다.

**Q. 같은 조건인데 결과가 달라요.**  
A. 크롤러 기반 채널(DC인사이드, 블라인드 등)은 실시간 게시물이 변하므로 수집 시점에 따라 결과가 다를 수 있습니다. **강제 새로고침**을 사용하면 최신 데이터로 재수집합니다.

**Q. AI 대응 탭의 내용이 너무 획일적이에요.**  
A. API 키 없는 룰 기반 생성의 특성입니다. OpenAI API 키 연결 후 "AI 요약 생성/갱신"을 누르면 실제 수집된 문서 내용을 기반으로 맞춤형 분석이 생성됩니다.

---

## 부록: 화면별 분석 기능 요약

| 탭 | 주요 분석 기능 |
|----|-------------|
| **📊 개요** | 언급량 시계열 추이 / 감성 분포 스택 차트 / 채널별·키워드별 언급량 / 부정 스파이크 표시 |
| **🔥 트렌드** | 트렌드 키워드 Z-Score / 채널별 감성 분포 비교 |
| **📄 문서** | 원문 검색·필터링 / 감성 점수 확인 / 원문 링크 |
| **🤖 AI 대응** | 전체 요약 / 핵심 이슈 / FAQ 초안 / 공지문 / 에스컬레이션 기준 |

---

*최종 업데이트: 2026-02-21 | HF 미디어 모니터링 대시보드 v1.0*  
*문의: GitHub Repository https://github.com/dudejr2001-dot/HF-1*
